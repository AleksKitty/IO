# Лабораторная работа 2

**Название:** "Разработка драйвера блочного устройства"

**Цель работы:** получить знания и навыки разработки драйверов блочных устройств для операционной системы Linux.

## Описание функциональности драйвера

Драйвер должен создавать виртуальный жесткий диск в оперативной  памяти с размером 50 Мбайт. 
Созданный диск должен быть разбит на разделы в соответствии с  вариантом задания.
Провести форматирование разделов диска с помощью утилиты  mkfs.vfat. 
Измерить скорость передачи данных при копировании файлов между  разделами созданного виртуального диска. 
Измерить скорость передачи данных при копировании файлов между  разделами виртуального и реального жестких дисков.

Вариант 4: Три первичных раздела с размерами 10Мбайт, 25Мбайт и  15Мбайт.

## Инструкция по сборке

Склонировать данный репозиторий

Открыть терминал в текущей директории и выполнить комманду make

Модуль ядра будет скомпилирован в файл lab2.ko

## Инструкция пользователя

Чтобы добавить модуль, нужно выполнить команду insmod lab2.ko

Для удаления модуля - rmmod lab2

Все действия рекомендуется выполнять от пользователя root

## Примеры использования

Вывод информации о созданном виртуальном диске:

sudo fdisk /dev/mydisk -l

Выдать полные права:

sudo chmod 777 /dev/mydisk1

Записываем строку в первый раздел диска:

sudo echo "A a a a a a a a" > /dev/mydisk1

Читаем содержимое последних десяти строчек первого раздела диска:

sudo xxd /dev/mydisk1 | head -10

### Измерение скорости при коприровании:

Из виртуального диска на виртуальный диск:

sudo dd if=/dev/mydisk1 of=/dev/mydisk2 count=1

![image](https://user-images.githubusercontent.com/44571716/114161804-22ba1600-9931-11eb-9ebb-d92b0f9e63b6.png)

Из виртуального диска на реальный диск:

sudo dd if=/dev/mydisk2 of=/dev/sda1 count=1

![image](https://user-images.githubusercontent.com/44571716/114163129-842eb480-9932-11eb-8643-bddf672a4125.png)

